{% set path = "static/sections/news/" ~ lang ~ ".toml" %}
{% set data = load_data(path=path, required=false) %}

{% if data %}
<section id="news" class="section news-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-6 offset-lg-3">
                <div class="news-section__header">
                    {% if data.top_title %}<span>{{ data.top_title }}</span>{% endif %}
                    <h1>{{ data.title }}</h1>
                    {% if data.subtitle %}<p>{{ data.subtitle }}</p>{% endif %}
                </div>
            </div>
        </div>

        <div class="news-grid">
            {% for item in data.items %}
            <div class="news-card">
                <div class="news-card__image">
                    <img src="{{ get_url(path=item.image) }}" alt="{{ item.title }}">
                </div>
                <div class="news-card__body">
                    <span class="news-card__date">{{ item.date }}</span>
                    <h5 class="news-card__title">{{ item.title }}</h5>
                    <p class="news-card__text">{{ item.description }}</p>

                    {% if item.details %}
                    <a href="#" class="btn btn-sm btn-outline-primary mt-3" data-bs-toggle="modal"
                        data-bs-target="#newsModal{{ loop.index }}">See Details</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Modals -->
        {% for item in data.items %}
        {% if item.details %}
        <div class="modal fade" id="newsModal{{ loop.index }}" tabindex="-1"
            aria-labelledby="newsModalLabel{{ loop.index }}" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="newsModalLabel{{ loop.index }}"
                            style="font-family: inherit; margin: 0;">{{ item.title }}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-start" style="padding: 30px;">
                        <span style="color: #6a82fb; font-weight: 600; display: block; margin-bottom: 20px;">{{
                            item.date }}</span>
                        <div class="details-content" style="color: #444; line-height: 1.7; font-size: 15px;">
                            {{ item.details | markdown | safe }}
                        </div>

                        {% if item.extra_images %}
                        <div class="row mt-4">
                            {% for img in item.extra_images %}
                            <div class="col-md-4 mb-3">
                                <img src="{{ get_url(path=img) }}" class="img-fluid rounded shadow-sm"
                                    alt="Extra News Image" style="width: 100%; height: 150px; object-fit: cover;">
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</section>
{% endif %}