{% set path = "static/sections/conferences/" ~ lang ~ ".toml" %}
{% set data = load_data(path=path, required=false) %}

{% if data %}
<section class="section conferences" id="conferences"
    style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); padding: 80px 0;">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-6 offset-lg-3">
                {% if data.top_title %}
                <span class="top-title" style="color: #38bdf8;">{{ data.top_title }}</span>
                {% endif %}
                <h1 style="color: #e2e8f0; font-weight: 700;">{{ data.title }}</h1>
                {% if data.subtitle %}
                <p style="color: #94a3b8; margin-top: 10px;">{{ data.subtitle }}</p>
                {% endif %}
            </div>
        </div>

        <div class="news-slider-container" style="position: relative; padding: 0 50px;">
            <div id="confCarousel" class="carousel slide" data-bs-ride="false">
                <div class="carousel-inner" style="padding-bottom: 20px;">
                    <div class="carousel-item active">
                        <div class="row">
                            {% for event in data.events %}
                            {% if loop.index0 > 0 and loop.index0 % 3 == 0 %}
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row">
                            {% endif %}

                            <div class="col-lg-4 col-md-6 mb-4">
                                <div style="
                  background: rgba(30, 41, 59, 0.85);
                  border: 1px solid rgba(56, 189, 248, 0.12);
                  border-radius: 16px;
                  overflow: hidden;
                  transition: all 0.35s ease;
                  height: 100%;
                  display: flex;
                  flex-direction: column;
                  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                " onmouseover="this.style.transform='translateY(-6px)'; this.style.boxShadow='0 12px 40px rgba(56,189,248,0.12)'; this.style.borderColor='rgba(56,189,248,0.35)';"
                                    onmouseout="this.style.transform=''; this.style.boxShadow='0 4px 20px rgba(0,0,0,0.3)'; this.style.borderColor='rgba(56,189,248,0.12)';">

                                    <!-- Image -->
                                    {% if event.image %}
                                    <div style="height: 170px; overflow: hidden;">
                                        <img src="{{ get_url(path=event.image) }}" alt="{{ event.title }}"
                                            style="width:100%; height:100%; object-fit:cover;">
                                    </div>
                                    {% endif %}

                                    <!-- Content -->
                                    <div style="padding: 18px; flex: 1; display: flex; flex-direction: column;">
                                        <!-- Badges -->
                                        <div style="display:flex; gap:6px; flex-wrap:wrap; margin-bottom:10px;">
                                            <span
                                                style="background:rgba(56,189,248,0.15); color:#38bdf8; padding:2px 10px; border-radius:20px; font-size:0.72rem; font-weight:600;">{{
                                                event.type }}</span>
                                            <span style="
                        background:{% if event.mode == 'Talk' %}rgba(34,197,94,0.15){% elif event.mode == 'Poster' %}rgba(168,85,247,0.15){% else %}rgba(148,163,184,0.1){% endif %};
                        color:{% if event.mode == 'Talk' %}#22c55e{% elif event.mode == 'Poster' %}#a855f7{% else %}#94a3b8{% endif %};
                        padding:2px 10px; border-radius:20px; font-size:0.72rem; font-weight:600;">{{ event.mode
                                                }}</span>
                                        </div>

                                        <!-- Title -->
                                        <h5
                                            style="color:#f1f5f9; font-weight:600; font-size:1rem; margin-bottom:8px; line-height:1.4;">
                                            {{ event.title }}</h5>

                                        <!-- Date & Venue -->
                                        <div style="margin-bottom:10px;">
                                            <div
                                                style="color:#38bdf8; font-size:0.82rem; font-weight:500; margin-bottom:3px;">
                                                ğŸ“… {{ event.date }}</div>
                                            <div style="color:#64748b; font-size:0.78rem;">ğŸ“ {{ event.venue }}</div>
                                        </div>

                                        <!-- Description -->
                                        <p style="color:#94a3b8; font-size:0.85rem; line-height:1.5; flex:1; margin:0;">
                                            {{ event.description }}</p>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Arrow Controls -->
                {% if data.events | length > 3 %}
                <button class="carousel-control-prev" type="button" data-bs-target="#confCarousel" data-bs-slide="prev"
                    style="width: 50px; left: -50px; justify-content: center; align-items: center;">
                    <span class="carousel-control-prev-icon" aria-hidden="true"
                        style="filter: invert(70%) sepia(85%) saturate(3000%) hue-rotate(170deg) brightness(100%) contrast(100%); width: 3rem; height: 3rem;"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#confCarousel" data-bs-slide="next"
                    style="width: 50px; right: -50px; justify-content: center; align-items: center;">
                    <span class="carousel-control-next-icon" aria-hidden="true"
                        style="filter: invert(70%) sepia(85%) saturate(3000%) hue-rotate(170deg) brightness(100%) contrast(100%); width: 3rem; height: 3rem;"></span>
                    <span class="visually-hidden">Next</span>
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endif %}